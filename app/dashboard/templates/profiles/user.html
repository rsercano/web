{% comment %}
  Copyright (C) 2018 Gitcoin Core

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load i18n email_obfuscator humanize static add_url_schema %}

<div class="container-fluid header profile-header dash">
  {% include 'shared/nav.html' %}
  <div class="container">
    <div class="row">
      <div class="col-12 col-lg-4 profile-header__main-infos">
        <div class="clearfix">
          <img class="profile-header__avatar mb-4 mr-4" src="{% if profile.avatar and profile.avatar.avatar_url %}{{ profile.avatar.avatar_url }}{% else %}{{ profile.avatar_url }}{% endif %}">
          <p class="profile-header__handle font-title">
            {% if profile.data.name %}
              {{ profile.data.name }}
            {% endif %}
          </p>
          <p class="mb-0">{{ profile.handle }}</p>
          <p class="profile-header__links clearfix mt-1">
            <a href="{{ profile.data.html_url }}?tab=repositories" target="_blank" rel="noopener noreferrer" >
              <i class="fab fa-github"></i>
            </a>
            {% if profile.data.blog and user.is_authenticated %}
              <a href="{{ profile.data.blog|add_url_schema }}" target="_blank" rel="noopener noreferrer" >
                <i class="fas fa-home"></i>
              </a>
            {% endif %}
            {% if profile.data.email and user.is_authenticated %}
              <a href="mailto:{{profile.data.email | obfuscate}}">
                <i class="far fa-envelope"></i>
              </a>
            {% endif %}
          </p>
        </div>
        {% if profile.data.bio %}
          <div class="profile-header__bio my-2">
            {{ profile.data.bio }}
          </div>
        {% endif %}
      </div>
      <div class="col-12 col-lg-4">
        <div class="profile-header__stats profile-header__stats--contributor card mb-4">
          <div class="card-header font-subheader">
            {% trans "Contributor" %}
          </div>
          <div class="card-body font-subheader">
            <ul>
              <li><span class="highlight">{{ count_bounties_completed }}</span> {% trans "bounties completed" %}</li>
              <li><span class="highlight">{{ sum_eth_collected|floatformat:2 }}</span> {% trans "ETH collected" %}</li>
              {% if no_times_been_removed %}
                  <li> - {% trans "removed from" %} <span class="highlight">{{ no_times_been_removed }}</span> {% trans "bounties" %}</li>
              {% endif %}
              {% if scoreboard_position_contributor %}
                  <li><span class="highlight">#{{ scoreboard_position_contributor }}</span> {% trans "contributor" %}</li>
              {% endif %}
              <li class="works_with_list">
                {% if works_with_collected|length != 0 %}
                    <span class="font-body">( <i class="fa fa-code"></i> ) Contributes To:</span>
                    {% if works_with_collected|length > 2 %}
                    <br>
                    {% endif %}
                    {% for profile, num_times in works_with_collected.items %}
                        <a href="{% url 'profile' profile %} ">
                          <img src='/static/avatar/{{ profile }}' title="<div class='tooltip-info tooltip-xs'>{{ profile }}: {{ num_times }} times</div>">
                        </a>
                    {% endfor %}
                {% endif %}
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <div class="profile-header__stats profile-header__stats--funder card mb-4">
          <div class="card-header font-subheader">
            {% trans "Funder" %}
          </div>
          <div class="card-body font-subheader">
            <ul>
              <li><span class="highlight">{{ funded_bounties_count }}</span> {% trans "bounties funded" %}</li>
              <li><span class="highlight">{{ sum_eth_funded|floatformat:2 }}</span> {% trans "ETH funded" %}</li>
              {% if scoreboard_position_funder %}
                  <li><span class="highlight">#{{ scoreboard_position_funder }}</span> {% trans "funder" %}</li>
              {% endif %}
              <li class="works_with_list">
                {% if works_with_funded|length %}
                    <span class="font-body">( <i class="fab fa-ethereum"></i> ) </i> {% trans "Funds" %}:</span>
                    {% if works_with_funded|length > 2 %}
                    <br>
                    {% endif %}
                    {% for profile, num_times in works_with_funded.items %}
                      <a href="{% url 'profile' profile %} ">
                        <img src='/static/avatar/{{ profile }}' title="<div class='tooltip-info tooltip-xs'>{{ profile }}: {{ num_times }} times</div>">
                      </a>
                    {% endfor %}
                {% endif %}
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>